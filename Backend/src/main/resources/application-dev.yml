# Profilo dev: può creare/aggiornare schema per sviluppo locale
spring:
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

logging:
  level:
    com.portfolio.backend.service.DataRetentionService: DEBUG
    com.portfolio.backend.scheduler.DataRetentionJob: DEBUG
    com.portfolio.backend.service.PasswordResetService: DEBUG
    com.portfolio.backend.scheduler.PasswordResetCleanupJob: DEBUG

  # Esempio di configurazione SMTP per invio email (sviluppo)
  #mail:
  #  host: smtp.example.com
  #  port: 587
  #  username: user@example.com
  #  password: super-secret
  #  properties:
  #    mail:
  #      smtp:
  #        auth: true
  #        starttls:
  #          enable: true

  # Debug SMTP (vedi console per errore invio mail)
  mail:
    properties:
      mail:
        debug: true

app:
  # Rate limit per GET /api/posts/{locale}: 10 richieste/minuto per client (default)
  public-posts-rate-limit.max-requests: 10
  public-posts-rate-limit.window-seconds: 60
  # Rate limit per GET /api/admin/messages: 10 richieste/minuto per client (default)
  admin-messages-rate-limit.max-requests: 10
  admin-messages-rate-limit.window-seconds: 60
  # Rate limit per POST /api/admin/login: 5 richieste/minuto per IP (protezione brute-force)
  admin-login-rate-limit.max-requests: 5
  admin-login-rate-limit.window-seconds: 60
  # Email che riceve le notifiche contatti (da .env: APP_CONTACT_NOTIFICATION_EMAIL)
  contact:
    notification-email: ${APP_CONTACT_NOTIFICATION_EMAIL:}
  # Data retention. Per testare subito: decommenta e usa retention-days: 0 + cron ogni minuto.
  # Poi ricommenta o rimetti retention-days: 90 e cron "0 0 2 * * ?" per produzione.
  data-retention:
    retention-days: 0      # test: elimina tutto più vecchio di "ora" (quasi tutti i record)
    cron: "0 * * * * ?"    # test: esegue ogni minuto (secondo 0)
